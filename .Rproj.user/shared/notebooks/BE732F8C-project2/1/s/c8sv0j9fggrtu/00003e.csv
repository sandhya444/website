"0","newstates$region <- factor(newstates$region)"
"0","newstates$governor <- factor(newstates$governor) "
"0","y<-as.matrix(newstates$gdp)"
"0","x<-model.matrix(gdp~-1+., data = newstates)"
"0","head(x)"
"1"," "
"1"," governorDemocrat"
"1"," governorRepublican"
"1"," women"
"1","  men"
"1"," regionNE"
"1"," regionS"
"1"," regionW."
"1","
1"
"1","                0"
"1","                  1"
"1","   688"
"1","  922"
"1","        0"
"1","       1"
"1","        0"
"1","
2"
"1","                0"
"1","                  1"
"1","   857"
"1"," 1081"
"1","        0"
"1","       0"
"1","        1"
"1","
3"
"1","                0"
"1","                  1"
"1","   762"
"1","  910"
"1","        0"
"1","       0"
"1","        1"
"1","
4"
"1","                0"
"1","                  1"
"1","   681"
"1","  809"
"1","        0"
"1","       1"
"1","        0"
"1","
5"
"1","                1"
"1","                  0"
"1","   876"
"1","  992"
"1","        0"
"1","       0"
"1","        1"
"1","
6"
"1","                1"
"1","                  0"
"1","   908"
"1"," 1069"
"1","        0"
"1","       0"
"1","        1"
"1","
"
"1"," "
"1"," net.immigration"
"1","
1"
"1","            2772"
"1","
2"
"1","             659"
"1","
3"
"1","            7782"
"1","
4"
"1","             268"
"1","
5"
"1","           74028"
"1","
6"
"1","           10523"
"1","
"
"0","#running LASSO regression"
"0","#set.seed(1234)"
"0","#cv_states<-cv.glmnet(x,y)"
"0","#lasso_states<-glmnet(x,y, lambda=cv_states$lambda.1se)"
"0","#coef(lasso_states)"
"0",""
"0","#prob_lasso <- predict(lasso_states, newx = x,type = ""response"")"
"0","#head(prob_lasso)"
"0",""
"0","#MSE of the full model "
"0","#mean((newstates$gdp - prob_lasso)^2)"
"0",""
"0","#10-fold CV "
"0","set.seed(1234)"
"0","k=10 "
"0","data3<-newstates[sample(nrow(newstates)),] "
"0","folds3<-cut(seq(1:nrow(newstates)),breaks=k,labels=F) "
"0","diags3<-NULL"
"0","for(i in 1:k){"
"0","train3<-data3[folds3!=i,]"
"0","test3<-data3[folds3==i,]"
"0","fit3<-lm(gdp~net.immigration,data=train3)"
"0","yhat3<-predict(fit3,newdata=test3)"
"0","diags3<-mean((test3$gdp-yhat3)^2)"
"0","}"
"0",""
"0","#MSE using 10-fold CV"
"0","mean(diags3)"
"1","[1]"
"1"," 14361878073"
"1","
"
